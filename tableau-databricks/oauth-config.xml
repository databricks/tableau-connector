<?xml version="1.0" encoding="utf-8"?>
<pluginOAuthConfig>
    <dbclass>databricks_jdbc</dbclass>

    <clientIdDesktop>0464ea90-c12f-42a7-b347-c2311ca4413c</clientIdDesktop>
    <redirectUrisDesktop>http://localhost:55555/Callback</redirectUrisDesktop>
    <redirectUrisDesktop>http://localhost:55556/Callback</redirectUrisDesktop>
    <redirectUrisDesktop>http://localhost:55557/Callback</redirectUrisDesktop>
    <redirectUrisDesktop>http://localhost:55558/Callback</redirectUrisDesktop>
    <redirectUrisDesktop>http://localhost:55559/Callback</redirectUrisDesktop>

    <authUri>/oauth2/v2.0/authorize?includeHttpPath=true</authUri>
    <tokenUri>/oauth2/v2.0/token</tokenUri>
    <instanceUrlSuffix>/oidc</instanceUrlSuffix>
    <instanceUrlValidationRegex>^https:\/\/([a-zA-Z0-9-]+\.)+((microsoftonline\.(com|us|cn|de))|chinacloudapi\.cn|[a-zA-Z]+\/oidc).*</instanceUrlValidationRegex>

    <scopes>openid</scopes>
    <scopes>email</scopes>
    <scopes>profile</scopes>
    <scopes>offline_access</scopes>
    <scopes>2ff814a6-3304-4ab8-85cb-cd0e6f879c1d/user_impersonation</scopes>

    <capabilities>
        <entry>
           <key>OAUTH_CAP_SUPPORTS_STATE</key>
           <value>true</value>
        </entry>
        <entry>
            <key>OAUTH_CAP_REQUIRES_PROMPT_SELECT_ACCOUNT</key>
            <value>true</value>
        </entry>
        <entry>
            <key>OAUTH_CAP_SUPPORTS_CUSTOM_DOMAIN</key>
            <value>true</value>
        </entry>
        <entry>
            <key>OAUTH_CAP_PKCE_REQUIRES_CODE_CHALLENGE_METHOD</key>
            <value>true</value>
        </entry>
        <entry>
            <key>OAUTH_CAP_REQUIRE_PKCE</key>
            <value>true</value>
        </entry>
        <entry>
            <key>OAUTH_CAP_FIXED_PORT_IN_CALLBACK_URL</key>
            <value>true</value>
        </entry>
        <entry>
            <key>OAUTH_CAP_PKCE_REQUIRES_CODE_CHALLENGE_METHOD</key>
            <value>true</value>
        </entry>
        <entry>
            <key>OAUTH_CAP_CLIENT_SECRET_IN_URL_QUERY_PARAM</key>
            <value>true</value>
        </entry>
        <entry>
            <key>OAUTH_CAP_SUPPORTS_GET_USERINFO_FROM_ID_TOKEN</key>
            <value>true</value>
        </entry>
	    <entry>
            <key>OAUTH_CAP_INFER_INSTANCE_URL_FROM_SERVER</key>
            <value>true</value>
        </entry>
    </capabilities>
    <accessTokenResponseMaps>
        <entry>
            <key>ACCESSTOKEN</key>
            <value>access_token</value>
        </entry>
        <entry>
            <key>REFRESHTOKEN</key>
            <value>refresh_token</value>
        </entry>
        <entry>
            <key>access-token-issue-time</key>
            <value>issued_at</value>
        </entry>
        <entry>
            <key>access-token-expires-in</key>
            <value>expires_in</value>
        </entry>
        <entry>
            <key>id-token</key>
            <value>id_token</value>
        </entry>
        <entry>
            <key>username</key>
            <value>preferred_username</value>
        </entry>
    </accessTokenResponseMaps>
 </pluginOAuthConfig>
